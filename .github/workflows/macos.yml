name: macOS

on: [push, pull_request]

jobs:
  build:
    # macOS 11 is broken due to https://apple.stackexchange.com/a/425730/397839
    runs-on: macOS-10.15

    steps:
      - uses: actions/checkout@v2

      - name: Run tests
        run: |
          make -j$(sysctl -n hw.ncpu) distcheck
